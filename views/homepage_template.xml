<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
	
		<template name="Homepage" priority="29" t-name="website.homepage">
			<t t-call="website.layout">

				<div class="container">
					<!-- Current Day Code -->
					<div class="col-xs-12 col-sm-4 col-md-2 same_height-divs" style="text-align: center">
						<span class="c_month_year-text"> <span t-esc="today[4]"/><br/>
							<span t-esc="today[5]"/>
						</span>
					</div>
					<div class="col-xs-12 col-sm-8 col-md-4 same_height-divs current_ev-border">
						<div class="col-md-12">
							Textblblablalbalb
						</div>
						<hr class="today-text-hr"/>
						<a data-toggle="modal" t-attf-href="#TodayEventsModal">
							<span t-esc="today[2]"/>
						</a>
					</div>
					<div class="col-xs-6 col-sm-4 col-md-2 same_height-divs">
						<div class="today-align-text">
							Max:<span t-esc="today[9]"/>ºC
							Min:<span t-esc="today[8]"/>ºC
							<img class="day_weather-icon" t-attf-src="https:{{today[10]}}"/>
						</div>
						<hr class="today-hr"/>
						<div class="today_week_day-text">
							<span t-esc="today[1]"/>
						</div>
						<hr class="today-hr" style="vertical-align: middle;"/>
						<div class="today-text">
							<span t-esc="today[0]"/>
						</div>
					</div>
					<!-- End of Current Day -->

					<!-- Calendar start generated by python -->
					<t t-set="c_month" t-value="today[3]"/>
					<t t-foreach="calendar" t-as="cal">
						<!-- Ultimas -->
						<div t-if="cal_index == 2"> 
							<div class="col-xs-6 col-sm-8 col-md-4 ultimas-bg day-border same_height-divs">
								<div class="clearfix ult-txt-tit">
									ULTIMAS
								</div>
								<div class="clearfix ult-txt-res">
									Texto
								</div>
							</div>
						</div>
						<!-- END of Ultimas -->

						<!-- Day -->
						<t t-if="cal[3] in (1, 4, 7, 10)">
							<t t-if="cal[6]" t-set="monthcolor" t-value="'month1_we-bg'"/>
							<t t-else="" t-set="monthcolor" t-value="'month1_wd-bg'"/>
						</t>
						<t t-elif="cal[3] in (2, 5, 8, 11)">
							<t t-if="cal[6]" t-set="monthcolor" t-value="'month2_we-bg'"/>
							<t t-else="" t-set="monthcolor" t-value="'month2_wd-bg'"/>
						</t>
						<t t-else="">
							<t t-if="cal[6]" t-set="monthcolor" t-value="'month3_we-bg'"/>
							<t t-else="" t-set="monthcolor" t-value="'month3_wd-bg'"/>
						</t>

						<!-- Variables -->
						<t t-set="dayIndex" t-value="cal_index"/>
						<t t-set="callModal" t-value="'#event_modal'+str(dayIndex+1)"/>
						<t t-set="genModal" t-value="'event_modal'+str(dayIndex+1)"/>
						<t t-set="day_weather_img" t-value="'https:'+str(cal[10])"/>
						<!-- END of Variables -->
						
						<div t-attf-class="col-xs-6 col-sm-4 col-md-2 {{monthcolor}} day-border same_height-divs">
							<div class="clearfix event_day-text" style="height:35px">
								<div t-if="cal[0] == 1">
									<span t-esc="cal[4]"/>
									<span t-esc="cal[5]"/>
								</div>
                				<a data-toggle="modal" t-attf-href="{{callModal}}">
									<span t-esc="cal[2]"/>
								</a>
            				</div>
            				<hr class="weekday-hr"/>		
            				<div class="clearfix" style="margin-top: -5%;">
               					<div class="col-xs-12 col-sm-6 col-md-6 temp_day-text" style="">
                    				<img t-if="cal[10] != ''" class="day_weather-icon" t-attf-src="{{day_weather_img}}"/>
								<hr class="temps-hr"/>
									<t t-if="cal[9]!=''">
										<span t-esc="cal[9]"/>ºC<br/>
										<span t-esc="cal[8]"/>ºC
									</t>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-6">
									<div class="week_day-text">
										<span t-esc="cal[1]"/>
									</div>
									<div class="day-text">
										<span class="day-text" t-esc="cal[0]"/>
									</div>
								</div>
							</div>
        				</div>
						<!-- END of Day -->
						
						<!-- Day events modal -->
						<t t-if="cal[2] != ''">
							<t t-set="eventsIDs" t-value="cal[7]"/>
							<t t-set="eventsIDs" t-value="str(eventsIDs).split('-')"/>
							<div class="modal fade" t-attf-id="{{genModal}}" role="dialog">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header" style="border-bottom:0px;">
											<button type="button" class="close_btn-css" data-dismiss="modal" aria-label=""><span>×</span></button>
										</div>
										<div class="modal-body">			
											<div class="event_modal-css">
												<div class="event_modal_day-text">
													Dia <span t-esc="cal[0]"/>, <span t-esc="cal[1]"/> de <span t-esc="cal[5]"/>
												</div>
												<p style="color: green; font-size: 16px; font-weight: bold; text-align:left; margin-bottom:5px">Eventos:</p>
												<ul class="media-list">
													<li t-foreach="events" t-as="event" class="media" t-if="str(event.id) in eventsIDs">
														<div itemscope="itemscope" itemtype="http://schema.org/Event" class="media-body">
															<h4 class="media-heading">
																<a itemprop="url" t-att-class="event.state == 'done' and 'text-success'" t-attf-href="/event/#{ slug(event) }/#{(not event.menu_id) and 'register' or ''}">
																	<span itemprop="name" t-field="event.name"> </span>
																</a>
															</h4>
															<div>
																<t t-if="event.organizer_id">
																	Organizado por: <span t-field="event.organizer_id"> </span>
																</t>
															</div>
															<div>
																<i class="fa fa-clock-o"/>
																De: <span itemprop="startDate" t-field="event.with_context(tz=event.date_tz).date_begin" t-options="{&quot;hide_seconds&quot;:&quot;True&quot;}"/>
																<i>até</i>
																<span itemprop="endDate" t-field="event.with_context(tz=event.date_tz).date_end" t-options="{&quot;hide_seconds&quot;:&quot;True&quot;}"/>
															</div>
															<div itemprop="location" t-field="event.address_id" t-options="{&quot;widget&quot;: &quot;contact&quot;,&quot;fields&quot;: [&quot;city&quot;]}"/>
															<div class="text-muted" t-if="event.event_type_id">
																<i class="fa fa-tag"/> <span t-field="event.event_type_id"/>
															</div>
															<div>
																<span t-esc="event.description"/>
															</div>
														</div>
													</li>
												</ul>
												<p class="Debug-text">Array: <span t-esc="cal"/></p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</t>
						<!-- END of Day events modal -->
					</t>
					<!-- End of Calendar generated by python -->

					<!-- Today Events Modal -->
					<t t-set="Today_ev_IDs" t-value="today[7]"/>
					<t t-set="Today_ev_IDs" t-value="str(Today_ev_IDs).split('-')"/>
					<div class="modal fade" t-attf-id="TodayEventsModal" role="dialog">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header" style="border-bottom:0px;">
									<button type="button" class="close_btn-css" data-dismiss="modal" aria-label=""><span>×</span></button>
								</div>
								<div class="modal-body">			
									<div class="event_modal-css">
										<div class="event_modal_day-text">
											Dia <span t-esc="today[0]"/>, <span t-esc="today[1]"/> de <span t-esc="today[5]"/>
										</div>
										<p style="color: green; font-size: 16px; font-weight: bold; text-align:left; margin-bottom:5px">Eventos:</p>
										<ul class="media-list">
											<li t-foreach="events" t-as="event" class="media" t-if="str(event.id) in Today_ev_IDs">
												<div itemscope="itemscope" itemtype="http://schema.org/Event" class="media-body">
													<h4 class="media-heading">
														<a itemprop="url" t-att-class="event.state == 'done' and 'text-success'" t-attf-href="/event/#{ slug(event) }/#{(not event.menu_id) and 'register' or ''}">
															<span itemprop="name" t-field="event.name"> </span>
														</a>
													</h4>
													<div>
														<t t-if="event.organizer_id">
															Organizado por: <span t-field="event.organizer_id"> </span>
														</t>
													</div>
													<div>
														<i class="fa fa-clock-o"/>
														De: <span itemprop="startDate" t-field="event.with_context(tz=event.date_tz).date_begin" t-options="{&quot;hide_seconds&quot;:&quot;True&quot;}"/>
														<i>até</i>
														<span itemprop="endDate" t-field="event.with_context(tz=event.date_tz).date_end" t-options="{&quot;hide_seconds&quot;:&quot;True&quot;}"/>
													</div>
													<div itemprop="location" t-field="event.address_id" t-options="{&quot;widget&quot;: &quot;contact&quot;,&quot;fields&quot;: [&quot;city&quot;]}"/>
													<div class="text-muted" t-if="event.event_type_id">
														<i class="fa fa-tag"/> <span t-field="event.event_type_id"/>
													</div>
													<div>
														<span t-esc="event.description"/>
													</div>
												</div>
											</li>
										</ul>
										<p class="Debug-text">Array: <span t-esc="today"/></p>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- END of today Events Modal -->

       			</div>
			</t>

		</template>

	</data>
</odoo>
