<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<template id="event_inquiry" name="Event submission" page="True">
			<t t-call="website.layout">
				<div id="wrap" class="oe_structure">
					<div class="container">
						<div class="row">
							<div class="col-md-12">
								<form method="POST" action="/event/inquiry/process" enctype="multipart/form-data" id="booking-form" class="booking-form p-50 mb-0" data-bg-color="rgba(255, 255, 255, 0.7)" style="background: rgba(255, 255, 255, 0.7) none repeat scroll 0% 0% ! important;">
									<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
									<div class="row">

										<div class="col-sm-6">
											<div class="form-group">
												<label for="self_description">
													Entidade
												</label>
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group">
												<input placeholder="Nome" type="text" name="entidade_nome" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="E-mail (Utilizado para Acesso à Plataforma)" type="text" name="email" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="Password (Para Acesso à Plataforma)" type="password" name="password" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group">
												<input placeholder="Endereço" type="text" name="entidade_endereco" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="Código Postal" type="text" name="entidade_zip" class="form-control" required="True" />
											</div>
										</div>
										
										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="Local" type="text" name="entidade_localidade" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label for="state" style="display:none;">
													Distrito / Provincia
												</label>
												<select name="entidade_distrito" class="form-control" required="True">
													<option value="">
														Selecione Distrito / Provincia
													</option>
													<t t-foreach="states" t-as="state">
														<option t-attf-value="#{state.id}">
															<t t-esc="state.name" />
														</option>
													</t>
												</select>
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group">
												<label>
													Evento
												</label>
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group">
												<input placeholder="Designação" type="text" name="evento_nome" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<select name="evento_edicao" class="form-control" required="True">
													<option value="null" selected="true" disabled="disabled">
														Número de Anos em que se realiza o evento
													</option>
													<option value="1-3">
														1-3
													</option>
													<option value="4-10">
														4-10
													</option>
													<option value="11-25">
														11-25
													</option>
													<option value="26-50">
														26-50
													</option>
													<option value="51-100">
														51-100
													</option>
													<option value="100">
														&gt;100
													</option>
												</select>
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label for="event_type" style="display:none;">
													Tipologia do Evento
												</label>
												<select name="evento_tipo" class="form-control" required="True">
													<option value="">
														Selecione a tipologia
													</option>
													<t t-foreach="event_type" t-as="e_type">
														<option t-attf-value="#{e_type.id}">
															<t t-esc="e_type.name" />
														</option>
													</t>
												</select>
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label for="state" style="display:none;">
													Distrito / Provincia
												</label>
												<select name="evento_distrito" class="form-control" required="True">
													<option value="">
														Selecione Distrito / Provincia
													</option>
													<t t-foreach="states" t-as="state">
														<option t-attf-value="#{state.id}">
															<t t-esc="state.name" />
														</option>
													</t>
												</select>
											</div>
										</div>

										<!-- DATA DE REALIZAÇÃO -->

										<div class="col-sm-6">
											<div class="form-group">
												<label for="periodo" style="display:none;">
													Periodicidade
												</label>
												<select name="evento_perio" class="form-control" required="True">
													<option value="">
														Selecione a periodicidade
													</option>
													<t t-foreach="periodo" t-as="p">
														<option t-attf-value="#{p.id}">
															<t t-esc="p.name" />
														</option>
													</t>
												</select>
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label for="partner_type" style="display:none;">
													Tipo de entidade organizadora
												</label>
												<select name="entidade_tipo" class="form-control" required="True">
													<option value="">
														Selecione o tipo de entidade
													</option>
													<t t-foreach="partner_type" t-as="p_type">
														<option t-attf-value="#{p_type.id}">
															<t t-esc="p_type.name" />
														</option>
													</t>
												</select>
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group">
												<textarea placeholder="Breve Descrição do Evento" class="form-control" name="evento_descricao"></textarea>
											</div>
										</div>

										<!-- Contactos da Entidade Organizadora -->
										<div class="col-sm-12">
											<div class="form-group">
												<label>
													Contactos da Entidade Organizadora
												</label>
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="Pessoa Responsável" type="text" name="pessoa_nome" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="Telefone" type="text" name="pessoa_tel" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="E-mail" type="text" name="pessoa_email" class="form-control" required="True" />
											</div>
										</div>




										<!-- Tipo de produtos -->
										<div class="col-sm-12">
											<div class="form-group">
												<label>
													Informação sobre os produtos
												</label>
											</div>
										</div>

										<div class="col-sm-6">
											<div class="form-group">
												<label for="products_type" style="display:none;">
													Tipo de Produtos Transacionados
												</label>
												<select id="products_type_select" name="produtos_tipo" class="form-control">
													<option value="-1" selected="true" disabled="disabled">
														Selecione o tipo de produtos
													</option>
													<t t-foreach="products_type" t-as="p_type">
														<option t-attf-value="#{p_type.id}">
															<t t-esc="p_type.name"/>
														</option>
													</t>
												</select>
											</div>
										</div>

										<div class="col-sm-6">
											<div style="display:none" class="form-group">
												<label for="products" style="display:none;">
													Produtos Transacionados
												</label>
												<select id="dropdownlist" name="produtos" class="form-control">
													<option value="-1" selected="true" disabled="disabled">
														Selecione os produtos
													</option>
													<t t-foreach="products" t-as="p">
														<option style="display:block" t-attf-value="#{int(p.product_type_id)}">
															<t t-esc="p.name"/>
														</option>
													</t>
												</select>
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group">
												<div id="all_products" style="display:none; height: 200px; width: 250px; overflow-y: scroll; border:2px solid #ccc; float:left;">
													<t t-foreach="products" t-as="p">
														<div t-attf-name="#{int(p.product_type_id)}"><input type="checkbox" t-attf-value="#{int(p.product_type_id)}"/><t t-esc="p.name"/></div>
													</t>
												</div>
											</div>
										</div>

										<script>
											$("#products_type_select").on('change', function() {
												var p_type = this.value;
												console.log("diferente");
												$("#all_products").css("display", "block");
												/*$("#dropdownlist > option").each(function() {
													if (this.value == p_type){
														$(this).css("display", "block");
														console.log(this.text + ' ' + p_type + ' : display block');
													}
													else {
														$(this).css("display", "none");
														console.log(this.text + ' ' + p_type + ' : display none');
													}
												});*/

												$("#all_products div").each(function() {
													var produto = $(this).attr('name');
													if (produto == p_type){
														$(this).css("display", "block");
														console.log(this.text + ' ' + p_type + ' : display block');
													}
													else {
														$(this).css("display", "none");
														console.log(this.text + ' ' + p_type + ' : display none');
													}
												});

											});
										</script>

										<div class="col-sm-12">
											<div class="form-group">
												<textarea placeholder="Identifcação dos Produtos Transacionados" class="form-control" name="descricao"></textarea>
											</div>
										</div>

										<!-- Informação complementar do evento -->
										<div class="col-sm-12">
											<div class="form-group">
												<label>
													Informação complementar do evento
												</label>
											</div>
										</div>

										<!-- Informação complementar do evento -->
										<div class="col-sm-6">
											<div class="form-group">
												<input placeholder="Coordenadas GPS" type="text" name="gps" class="form-control" required="True" />
											</div>
										</div>

										<div class="col-sm-12">
											<div class="form-group text-center">
												<button data-loading-text="Please wait..." class="btn btn-colored btn-theme-colored btn-lg pt-15 pb-15" type="submit">
													Registar
												</button>
												<!-- <button t-attf-class="btn btn-primary btn-lg">Register Profile</button> -->
											</div>
										</div>


									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</t>
		</template>
	</data>
</odoo>
